# Cowl - Product Requirements Document (PRD)

## 1. プロダクト概要

### プロダクト名
Cowl（カウル）

### ビジョン
友達との旅行や食事会で、複雑な支払いを簡単に整理し、誰もが納得できる透明な精算を実現する。

### ミッション
グループでの金銭管理の煩わしさを解消し、みんなが楽しい時間に集中できる環境を提供する。

## 2. ターゲットユーザー

### プライマリーターゲット
- **年齢層**: 大学生〜20代（18-29歳）
- **属性**: 友達とよく旅行に行く、金銭的に正確な割り勘を求める若者
- **行動特性**:
  - SNSを頻繁に利用
  - スマートフォンでの操作が中心
  - グループでの活動が多い
  - 金銭管理に対して几帳面

### ユーザーペルソナ
**田中さくら（22歳、大学生）**
- 友人5-6人と月1回程度旅行
- 割り勘の計算や立て替えの管理が面倒
- スマホアプリを日常的に使用
- 金銭トラブルを避けたい

## 3. 解決する課題

### 現在の問題
1. **複雑な割り勘計算**: 複数人での支払い分担が複雑
2. **立て替えの管理**: 誰が何を支払ったかの記録が困難
3. **精算の煩わしさ**: 最終的な精算計算が面倒
4. **透明性の欠如**: 支払い記録の共有ができない
5. **金銭トラブル**: 曖昧な精算による関係悪化

### 解決策
- 共用ウォレットでの支払い記録管理
- 自動的な精算計算と目安表示
- リアルタイムでの支払い状況共有
- 直感的なUIでの簡単操作

## 4. プロダクト機能

### MVP（Minimum Viable Product）機能

#### 4.1 ウォレット管理
- **ウォレット作成**: イベント名、期間設定
- **メンバー招待**: 招待リンク/コード共有
- **メンバー管理**: 参加者一覧表示

#### 4.2 支払い記録
- **支払い登録**: 金額、内容、支払い者、分担者選択
- **レシート撮影**: OCRによる自動金額読み取り（将来機能）
- **支払い履歴**: 時系列での支払い一覧
- **編集・削除**: 支払い記録の修正

#### 4.3 精算機能
- **残高計算**: 各メンバーの収支状況表示
- **精算提案**: 最小回数での精算方法提示（目安として）

#### 4.4 共有機能
- **リアルタイム同期**: メンバー間での情報共有

## 5. 技術スタック

### フロントエンド
- **Next.js 14** (App Router)
- **TypeScript**
- **Tailwind CSS**
- **PWA対応**

### バックエンド
- **Next.js API Routes**
- **Prisma ORM**
- **PostgreSQL** (Supabase)

### インフラ・その他
- **Vercel** (ホスティング)
- **Supabase** (DB + Auth + リアルタイム)
- **Google Ads** (広告表示)

### 選定理由
- **コスト効率**: Vercel/Supabaseの無料枠活用
- **開発効率**: Next.jsのフルスタック開発
- **スケーラビリティ**: 段階的な機能拡張が可能
- **保守性**: TypeScript + Prismaでの型安全性

## 6. マネタイズ戦略

### 無料プラン
- **制限**: 1つのアクティブウォレットのみ
- **広告表示**: ページ下部にバナー広告
- **基本機能**: 全ての基本機能利用可能

### プレミアムプラン（月額480円）
- **複数ウォレット**: 無制限作成・管理
- **広告非表示**

### 収益予測
- MAU 10,000人（プレミアム転換率5%）
- 月額収益: 500人 × 480円 = 24万円
- 広告収益: 月額5-10万円
- **目標月間収益**: 30-35万円

## 7. ユーザー体験設計

### オンボーディング
1. **簡単登録**: 電話番号またはGoogle認証
2. **チュートリアル**: 3ステップでの基本操作説明
3. **サンプルウォレット**: 練習用データで機能体験

### 主要ユーザーフロー
1. **ウォレット作成** → 招待リンク共有
2. **メンバー参加** → 支払い記録開始
3. **リアルタイム確認** → 精算計算
4. **精算実行** → ウォレット終了

### UI/UX原則
- **シンプル**: 3タップ以内での主要操作
- **直感的**: アイコンとビジュアルでの分かりやすさ
- **モバイルファースト**: スマホ操作に最適化
- **日本語**: 完全日本語対応

## 8. リスクと対策

### 技術リスク
- **パフォーマンス**: 大量データ処理時の最適化
- **セキュリティ**: 金銭データの保護強化

### ビジネスリスク
- **競合優位性**: 差別化機能の継続開発
- **ユーザー獲得**: SNSマーケティングの活用

### 対策
- 段階的リリースでのリスク最小化
- ユーザーフィードバックによる継続改善
- セキュリティ監査の定期実施

## 9. MVP開発手順

### Phase 1: 環境構築・基盤設定 (1-2日)

**1.1 プロジェクト初期化**
- Next.js 14プロジェクト作成 (App Router)
- TypeScript設定
- Tailwind CSS設定
- ESLint・Prettier設定

**1.2 データベース・認証設定**
- Supabase プロジェクト作成
- Prisma ORM設定
- 認証設定 (Google OAuth)

**1.3 デプロイ環境**
- Vercel連携
- 環境変数設定

### Phase 2: データベース設計・API基盤 (2-3日)

**2.1 データモデル設計**
```
- User (ユーザー)
- Wallet (ウォレット)  
- WalletMember (ウォレットメンバー)
- Payment (支払い記録)
- Settlement (精算記録)
```

**2.2 Prismaスキーマ作成**
- リレーション設計
- マイグレーション実行

**2.3 API Routes作成**
- 認証API
- ウォレット管理API
- 支払い記録API
- 精算計算API

### Phase 3: 認証・ユーザー管理 (2-3日)

**3.1 認証機能**
- Google認証実装
- セッション管理
- ログイン・ログアウト

**3.2 ユーザー管理**
- プロフィール表示
- アカウント設定

### Phase 4: ウォレット機能 (3-4日)

**4.1 ウォレット管理**
- ウォレット作成
- 招待リンク生成
- メンバー招待・参加
- ウォレット一覧表示

**4.2 メンバー管理**
- 参加者一覧
- メンバー権限管理

### Phase 5: 支払い記録機能 (4-5日)

**5.1 支払い登録**
- 支払い情報入力フォーム
- 分担者選択機能
- 支払い記録保存

**5.2 支払い管理**
- 支払い履歴表示
- 編集・削除機能
- リアルタイム同期

### Phase 6: 精算機能 (3-4日)

**6.1 精算計算**
- 各メンバーの収支計算
- 精算提案アルゴリズム
- 最小回数精算計算

**6.2 精算表示**
- 残高状況表示
- 精算提案UI
- 精算記録機能

### Phase 7: UI/UX改善・共有機能 (2-3日)

**7.1 レスポンシブ対応**
- モバイル最適化
- タブレット対応

**7.2 共有機能**
- CSV/PDFエクスポート
- 履歴共有

### Phase 8: テスト・最終調整 (2-3日)

**8.1 テスト**
- 単体テスト
- 統合テスト
- E2Eテスト

**8.2 最適化**
- パフォーマンス最適化
- セキュリティ強化
- バグ修正

**総開発期間: 3-4週間**
